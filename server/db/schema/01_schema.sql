DROP TABLE IF EXISTS users CASCADE;
DROP TABLE IF EXISTS badges CASCADE;
DROP TABLE IF EXISTS pages CASCADE;


CREATE TABLE users (
  id SERIAL PRIMARY KEY NOT NULL,
  email VARCHAR(255) NOT NULL,
  password VARCHAR(255) NOT NULL,
  avatar INTEGER NOT NULL,
  username VARCHAR(255) NOT NULL,
  bio TEXT,
  active BOOLEAN DEFAULT TRUE NOT NULL,
  created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated TIMESTAMP DEFAULT NULL
);


CREATE TABLE badges (
  id SERIAL PRIMARY KEY NOT NULL,
  title VARCHAR(255) NOT NULL,
  description TEXT NOT NULL,
  img VARCHAR(255) NOT NULL
);


CREATE TABLE pages (
  id SERIAL PRIMARY KEY NOT NULL,
  show_id INTEGER NOT NULL,
  show_title VARCHAR(255) NOT NULL,
  show_img VARCHAR(255) NOT NULL,
  season_id INTEGER,
  episode_id INTEGER,
  creator_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  badges_id INTEGER REFERENCES badges(id) ON DELETE CASCADE,
  created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated TIMESTAMP DEFAULT NULL
);
